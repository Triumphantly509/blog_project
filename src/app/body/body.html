<div class="body container">
  <div class="row">

    <!-- Post Grid: 80% -->
    <div class="col-grid">
      <div class="row g-3">
        <!-- Loop through posts -->
        <div class="col-custom d-flex" *ngFor="let post of posts">
          <div class="blog-card card flex-fill">

            <!-- Post image -->
            <div class="card-img-wrapper">
              <img *ngIf="post.header_image" 
                   [src]="post.header_image" 
                   class="card-img-top" 
                   alt="{{ post.title }}">
            </div>

            <!-- Post body -->
            <div class="card-body d-flex flex-column">
              <h5 class="card-title">{{ post.title }}</h5>

              <p class="card-text">
                {{ post.content | stripHtml | slice:0:50 }}
                <span *ngIf="(post.content | stripHtml).length > 50">
                  ...
                  <a [routerLink]="['/post', post.id]" class="read-more">Read more</a>
                </span>
              </p>

              <div class="mt-auto card-meta">
                <small class="text-muted">
                  {{ post.date_published | date:'mediumDate' }}
                </small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Pagination + Posts per page -->
      <div class="pagination-wrapper mt-4 d-flex justify-content-between align-items-center flex-wrap">
      

        <!-- Pagination + Posts per page -->
        <ul class="pagination custom-pagination mb-0 justify-content-end align-items-center">

          <!-- Posts per page selector as a list item -->
          <li class="page-item d-flex align-items-center me-2">
            <span class="me-2 mb-0">Show:</span>
            <select class="form-select form-select-sm" [(ngModel)]="pageSize" (change)="changePageSize(pageSize)">
              <option *ngFor="let option of pageSizeOptions" [value]="option">{{ option }}</option>
            </select>
          </li>

          <!-- First page -->
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="loadPosts(1)" [disabled]="currentPage === 1">
              <i class="fas fa-angle-double-left"></i>
            </button>
          </li>

          <!-- Previous page -->
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="loadPosts(currentPage - 1)" [disabled]="currentPage === 1">
              <i class="fas fa-chevron-left"></i>
            </button>
          </li>

          <!-- Page numbers -->
          <ng-container class="d-none d-md-flex">
            <li *ngFor="let page of getPages()" 
                class="page-item" 
                [class.active]="page === currentPage"
                [class.disabled]="page === '...'">
              
              <button *ngIf="page !== '...'" class="page-link" (click)="loadPosts(page)">
                {{ page }}
              </button>

              <span *ngIf="page === '...'" class="page-link">â€¦</span>
            </li>
          </ng-container>

          <!-- Next page -->
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="loadPosts(currentPage + 1)" [disabled]="currentPage === totalPages">
              <i class="fas fa-chevron-right"></i>
            </button>
          </li>

          <!-- Last page -->
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="loadPosts(totalPages)" [disabled]="currentPage === totalPages">
              <i class="fas fa-angle-double-right"></i>
            </button>
          </li>
        </ul>

      </div>
    </div>

    <!-- Sidebar: 20% -->
    <div class="col-sidebar">
      <div class="sidebar p-3 border rounded bg-light">
        <h6>Advertisements</h6>
        <hr>
        <div class="ad-sidebar mb-3 d-flex align-items-center justify-content-center">
          Advertisement 1
        </div>
        <div class="ad-sidebar mb-3 d-flex align-items-center justify-content-center">
          Advertisement 2
        </div>
        <div class="ad-sidebar mb-3 d-flex align-items-center justify-content-center">
          Advertisement 3
        </div>
      </div>
    </div>

  </div>
</div>
